<core:FragmentDefinition xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:custom="hdm.control" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout" xmlns:control="cloudrunway.control">
    <OverflowToolbar design="Solid" class="sapMListHdr sapMTBHeader-CTX">
           <Title text="{i18n>terminationDetails}"/>
           <ToolbarSpacer />
           <Button text="{i18n>cancel}" id="btnCancel" press="onTerminationEditCancel" type="Ghost" visible="{= ${terminationModel>/activeTerminationEditMode}}"/>
           <Button icon="sap-icon://save" text="{i18n>save}" id="btnSave" type="Emphasized" press="onTerminationUpdate" visible="{= ${terminationModel>/activeTerminationEditMode}}"/>
           <Button icon="sap-icon://edit" text="{i18n>editDetails}" id="btnEdit" press="onTerminationEdit" type="Ghost" visible="{= ${terminationModel>/activeTermination/status} !== 'Retracted' &amp;&amp; !${terminationModel>/activeTerminationEditMode}}"/>
        </OverflowToolbar>
      <Panel headerText="" class="">
         <layout:Grid defaultSpan="L3 M6 S12" hSpacing="0" vSpacing="1" class="sapUiSmallMarginTop sapUiSmallMarginBottom sapMTBStandard borderColor">
            <layout:content>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <Label text="{i18n>terminationStatus}" required="true"/>
                  <Select id="selBusinessScenarioEdit" visible="{= ${terminationModel>/activeTerminationEditMode}}" selectedKey="{terminationModel>/activeTermination/status}" forceSelection="false" items="{path: 'terminationModel>/TerminationStatusList', filters: [{path: 'key', operator: 'NE', value1:'Completed'}]}" width="100%">
                     <core:Item id="itemBusinessScenarioEdit" key="{terminationModel>key}" text="{terminationModel>text}" />
                  </Select>
                  <ObjectStatus visible="{= !${terminationModel>/activeTerminationEditMode}}" text="{parts: [{path: 'terminationModel>/TerminationStatusList'}, {path: 'terminationModel>/activeTermination/status'}], formatter:'.formatter.getValueDescr'}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <HBox>
                     <Label text="{i18n>businessScenario}"/>
                     <core:Icon
                        class="sapUiSmallMarginBegin"
                        src="sap-icon://information"
                        color="#0070f2"
                        tooltip="More info" />
                  </HBox>
                  <Text text="{parts: [{path: 'terminationModel>/BusinessScenarioList'}, {path: 'terminationModel>/activeTermination/businessScenario'}], formatter:'.formatter.getValueDescr'}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <Label text="{i18n>triggerReason}" />
                  <Text text="{terminationModel>/activeTermination/terminationTriggerReason}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <Label text="{i18n>terminationType}" />
                  <Text text="{terminationModel>/activeTermination/terminationType}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <Label text="{i18n>terminationOrigin}" required="true"/>
                  <Select id="selTerminationOriginEdit" visible="{= ${terminationModel>/activeTerminationEditMode}}" selectedKey="{terminationModel>/activeTermination/terminationOrigin}" forceSelection="false" items="{terminationModel>/TerminationOriginList}" width="100%">
                     <core:Item id="itemTerminationOriginEdit" key="{terminationModel>key}" text="{terminationModel>text}" />
                  </Select>
                  <Text visible="{= !${terminationModel>/activeTerminationEditMode}}" text="{parts: [{path: 'terminationModel>/TerminationOriginList'}, {path: 'terminationModel>/activeTermination/terminationOrigin'}], formatter:'.formatter.getValueDescr'}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <HBox>
                     <Label text="{i18n>renRiskReason}" />
                     <core:Icon
                        class="sapUiSmallMarginBegin"
                        src="sap-icon://information"
                        color="#0070f2"
                        tooltip="More info" />
                  </HBox>
                  <Text text="{terminationModel>/activeTermination/renewalRiskReason}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <Label text="{i18n>initiatedBy}" />
                  <Text text="{terminationModel>/activeTermination/initiatedBy}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px">
                  <Label text="{i18n>icertisId}" />
                  <Text text="{terminationModel>/activeTermination/icertisCaseNo}" />
               </VBox>
            </layout:content>
         </layout:Grid>
         <layout:Grid defaultSpan="L3 M6 S12" hSpacing="0" vSpacing="1" class="sapUiSmallMarginBottom sapMTBStandard borderColor">
            <layout:content>
               <VBox height="50px" class="sapUiSmallMarginEnd">
                  <Label text="{i18n>terminationRequestor}" required="true"/>
                  <control:ValueHelpInput
                     id="inpTerminationRequesterEdit"
                     valueHelpType="contactPerson"
                     value="{terminationModel>/activeTermination/terminationRequester}"
                     selectedItem="{terminationModel>/activeTermination/requesterObject}"
                     accountId="{terminationModel>/oppAccountID}"
                     enabled="{= ${terminationModel>/activeTerminationEditMode}}"
                     visible="{= ${terminationModel>/activeTerminationEditMode}}"
                     required="true"
                     width="100%"
                     valueSelected="onRequesterSelected"
                     change="onRequesterChange" />
                  <Text 
                     text="{parts: [{path: 'terminationModel>/activeTermination/terminationRequester'}, {path: 'terminationModel>/activeTermination/requesterObject/formattedName'}], formatter: '.formatter.resolveContactPersonName'}"
                     visible="{= !${terminationModel>/activeTerminationEditMode}}"
                     width="100%" />
               </VBox>
               <VBox height="50px">
                  <Label text="{i18n>terminationResponsible}" required="true"/>
                  <control:ValueHelpInput
                     id="inpTerminationResponsibleEdit"
                     valueHelpType="employee"
                     value="{terminationModel>/activeTermination/terminationResponsible}"
                     selectedItem="{terminationModel>/activeTermination/responsibleObject}"
                     enabled="{= ${terminationModel>/activeTerminationEditMode}}"
                     visible="{= ${terminationModel>/activeTerminationEditMode}}"
                     required="true"
                     width="100%"
                     valueSelected="onResponsibleSelected"
                     change="onResponsibleChange" />
                  <Text 
                     text="{parts: [{path: 'terminationModel>/activeTermination/terminationResponsible'}, {path: 'terminationModel>/activeTermination/responsibleObject/formattedName'}], formatter: '.formatter.resolveEmployeeName'}"
                     visible="{= !${terminationModel>/activeTerminationEditMode}}"
                     width="100%" />
               </VBox>
            </layout:content>
         </layout:Grid>
         <layout:Grid defaultSpan="L3 M6 S12" hSpacing="0" vSpacing="1">
            <layout:content>
               <VBox height="50px" class="sapUiSmallMarginEnd">
                  <Label text="{i18n>terminationRecipientDate}" required="true"/>
                  <DatePicker visible="{= ${terminationModel>/activeTerminationEditMode}}" value="{terminationModel>/activeTermination/terminationReceiptDate}" displayFormat="MMM dd, yyyy" valueFormat="yyyy-MM-dd" />
                  <Text visible="{= !${terminationModel>/activeTerminationEditMode}}" text="{terminationModel>/activeTermination/terminationReceiptDate}" />
               </VBox>
               <VBox height="50px" class="sapUiSmallMarginEnd">
                  <Label text="{i18n>terminationEffectDate}" required="true"/>
                  <DatePicker visible="{= ${terminationModel>/activeTerminationEditMode}}" value="{terminationModel>/activeTermination/terminationEffectiveDate}" displayFormat="MMM dd, yyyy" valueFormat="yyyy-MM-dd" />
                  <Text visible="{= !${terminationModel>/activeTerminationEditMode}}" text="{terminationModel>/activeTermination/terminationEffectiveDate}" />
               </VBox>
               <VBox class="sapUiSmallMarginEnd" height="50px" visible="{= ${terminationModel>/activeTermination/status} === 'Retracted' ? true : false}">
                  <Label text="{i18n>retractionReason}" required="true"/>
                  <Select visible="{= ${terminationModel>/activeTerminationEditMode}}" selectedKey="{terminationModel>/activeTermination/retractionReason}" forceSelection="false" items="{terminationModel>/TerminationRetractionReasons}" width="100%">
                     <core:Item id="itemRetractionReasonEdit" key="{terminationModel>key}" text="{terminationModel>text}" />
                  </Select>
                  <Text visible="{= !${terminationModel>/activeTerminationEditMode}}" text="{parts: [{path: 'terminationModel>/TerminationRetractionReasons'}, {path: 'terminationModel>/activeTermination/retractionReason'}], formatter:'.formatter.getValueDescr'}" />
               </VBox>
               <VBox height="50px" visible="{= ${terminationModel>/activeTermination/status} === 'Retracted' ? true : false}">
                  <Label text="{i18n>retractionDate}" required="true"/>
                  <DatePicker visible="{= ${terminationModel>/activeTerminationEditMode}}" value="{terminationModel>/activeTermination/retractionReceivedDate}" displayFormat="MMM dd, yyyy" valueFormat="yyyy-MM-dd" />
                  <Text visible="{= !${terminationModel>/activeTerminationEditMode}}" text="{terminationModel>/activeTermination/retractionReceivedDate}" />
               </VBox>
            </layout:content>
         </layout:Grid>
      </Panel>
</core:FragmentDefinition>