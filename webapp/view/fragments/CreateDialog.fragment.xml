<?xml version="1.0" encoding="UTF-8"?>
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:mvc="sap.ui.core.mvc" xmlns:upload="sap.m.upload" xmlns:ux="sap.uxap" xmlns:control="cloudrunway.control">
   <Dialog id="create_termination_dialog" title="New Termination" contentWidth="1200px" contentHeight="auto">
      <content>
         <VBox id="vboxCreateMessage" class="sapUiSmallMargin" visible="{= ${createModel>/taCreateMessages}.length > 0}">
            <MessageStrip
                     text="{= ${createModel>/taCreateMessages/0/message}}"
                     type="{= ${createModel>/taCreateMessages/0/type}}"
                     showIcon="true"
                     showCloseButton="true">
            </MessageStrip>
         </VBox>
         <VBox id="vboxTerminationDetails" class="sapUiSmallMarginTop">
            <OverflowToolbar design="Solid" style="Clear" class="sapMListHdr sapMTBHeader-CTX sapUiSmallMarginBegin">
               <Title text="{i18n>createDetails}" />
            </OverflowToolbar>
            <Panel>
               <layout:Grid defaultSpan="L4 M6 S12" hSpacing="0" vSpacing="0" class="sapMTBStandard sapUiSmallMarginBottom borderColor sapUiSmallMarginBegin sapUiSmallMarginEnd">
                  <layout:content>
                     <VBox height="50px" class="sapUiSmallMarginEnd">
                        <HBox>
                           <Label id="lblBusinessScenario" text="{i18n>businessScenario}" />
                           <core:Icon
                              class="sapUiSmallMarginBegin"
                              src="sap-icon://information"
                              color="#0070f2"
                              tooltip="More info" />
                        </HBox>
                        <Input id="selBusinessScenario" enabled="false" width="100%" value="{parts: [{path: 'terminationModel>/BusinessScenarioList'}, {path: 'createModel>/businessScenario'}], formatter:'.formatter.getValueDescr'}"/>
                     </VBox>
                     <VBox height="50px" class="sapUiSmallMarginEnd" >
                        <Label id="lblTerminationOrigin" text="{i18n>terminationOrigin}" required="true"/>
                        <Select id="selTerminationOrigin" forceSelection="false" width="100%" items="{terminationModel&gt;/TerminationOriginList}" selectedKey="{createModel>/terminationOrigin}">
                           <core:Item id="itemTerminationOrigin" key="{terminationModel&gt;key}" text="{terminationModel&gt;text}" />
                        </Select>
                     </VBox>
                     <VBox height="50px" class="sapUiSmallMarginBottom" >
                        <HBox>
                           <Label id="lblRenewalRiskReason" text="{i18n>renRiskReason}"/>
                           <core:Icon
                              class="sapUiSmallMarginBegin"
                              src="sap-icon://information"
                              color="#0070f2"
                              tooltip="More info" />
                        </HBox>
                        <Input id="inpRenewalRiskReason" enabled="false" width="100%" value="{parts: [{path: 'terminationModel>/RenewalRiskReasonList'}, {path: 'createModel>/riskReason'}], formatter:'.formatter.getValueDescr'}" />
                     </VBox>
                    </layout:content>
                </layout:Grid>
                <layout:Grid defaultSpan="L4 M6 S12" hSpacing="0" vSpacing="0" class="sapMTBStandard sapUiSmallMarginBottom borderColor sapUiSmallMarginBegin sapUiSmallMarginEnd">
                    <layout:content>
                     <VBox height="50px" class="sapUiSmallMarginEnd">
                        <Label id="lblTerminationRequester" text="{i18n>terminationRequestor}" required="true"/>
                        <control:ValueHelpInput
                           id="inpTerminationRequester"
                           valueHelpType="contactPerson"
                           value="{createModel>/requestor/formattedName}"
                           selectedItem="{createModel>/requestor}"
                           accountId="{terminationModel>/oppAccountID}"
                           enabled="true"
                           required="true"
                           width="100%"
                           placeholder="{i18n>enterRequestorName}"
                           valueSelected="onRequesterSelected"
                           change="onRequesterChange" />
                     </VBox>
                     <VBox height="50px" class="sapUiSmallMarginEnd sapUiSmallMarginBottom">
                        <Label id="lblTerminationResponsible" text="{i18n>terminationResponsible}" required="true"/>
                        <control:ValueHelpInput
                           id="inpTerminationResponsible"
                           valueHelpType="employee"
                           value="{createModel>/responsible/formattedName}"
                           selectedItem="{createModel>/responsible}"
                           enabled="true"
                           required="true"
                           width="100%"
                           placeholder="{i18n>enterResponsibleName}"
                           valueSelected="onResponsibleSelected"
                           change="onResponsibleChange" />
                     </VBox>
                     </layout:content>
                </layout:Grid>
                <layout:Grid defaultSpan="L4 M6 S12" hSpacing="0" vSpacing="0" class="sapUiSmallMarginBottom sapUiSmallMarginBegin sapUiSmallMarginEnd">
                    <layout:content>
                     <VBox height="50px" class="sapUiSmallMarginEnd">
                        <Label id="lblTerminationReceiptDate" text="{i18n>terminationRecipientDate}" required="true"/>
                        <DatePicker id="dpTerminationReceiptDate" displayFormat="MMM dd, yyyy" valueFormat="yyyy-MM-dd" placeholder="Select Date" value="{createModel>/receiptDate}"/>
                     </VBox>
                     <VBox height="50px" class="sapUiSmallMarginEnd">
                        <Label id="lblTerminationEffectiveDate" text="{i18n>terminationEffectDate}" required="true"/>
                        <DatePicker id="dpTerminationEffectiveDate" displayFormat="MMM dd, yyyy" valueFormat="yyyy-MM-dd" placeholder="Select Date" value="{createModel>/effectData}"/>
                     </VBox>
                  </layout:content>
               </layout:Grid>
            </Panel>
         </VBox>
         <VBox id="vboxTerminationAttachments">
            <OverflowToolbar design="Solid" class="sapMListHdr sapMTBHeader-CTX">
               <Title text="{i18n>createAttachments}" class="sapUiSmallMarginBegin"/>
               <ToolbarSpacer/>
               <Button text="{i18n>upload}" id="upload" press=".CreateDialog.onAddAttachment" type="Ghost" class="sapUiSmallMarginEnd"/>
            </OverflowToolbar>
            <List items="{createModel>/AttachmentsList}" noDataText="{i18n>noAttachmentsAdded}">
               <CustomListItem>
                     <HBox alignItems="Center" justifyContent="SpaceBetween" class="sapUiSmallMarginTopBottom sapUiMediumMarginBeginEnd">
                        <HBox alignItems="Center">
                           <core:Icon src="sap-icon://pdf-attachment" size="2rem" color="#D73027" class="sapUiSmallMarginEnd" />
                           <VBox>
                              <Text text="{createModel>name}" />
                           </VBox>
                        </HBox>
                        <HBox>
                           <Button icon="sap-icon://delete" type="Ghost" press=".CreateDialog.onDeleteAttachment" tooltip="Delete" />
                        </HBox>
                     </HBox>
               </CustomListItem>
            </List>
         </VBox>
      </content>
      <beginButton>
         <Button id="terminationSave" text="Create" press=".CreateDialog.onSubmitTermination" type="Emphasized" busy="{createModel>/loading}"/>
      </beginButton>
      <endButton>
         <Button id="terminatinCancel" text="Cancel" press=".CreateDialog.onCloseTerminationDialog" />
      </endButton>
   </Dialog>
</core:FragmentDefinition>